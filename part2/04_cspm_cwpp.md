# 4μ£Όμ°¨: CSPM μ΄λ΅  β€“ IaC λ³΄μ• κ°λ…κ³Ό ν•„μ”μ„±

---

## π― ν•™μµ λ©ν‘

- CSPM κ°λ…κ³Ό μ—­ν•  μ„¤λ…
    
- IaC λ³΄μ• μ κ²€ ν•„μ”μ„± μ΄ν•΄
    
- IaCμ—μ„ λ°μƒν•λ” μ£Όμ” λ³΄μ• μ·¨μ•½μ  νμ•…
    

---

## 1οΈβƒ£ CSPM κ°μ”

- **CSPM (Cloud Security Posture Management)**
    
    - ν΄λΌμ°λ“ μΈν”„λΌ λ° κ³„μ • μ„¤μ •μ λ³΄μ• μƒνƒ μ κ²€
        
    - μλ»λ κµ¬μ„±(Misconfiguration) νƒμ§€ λ° κ°μ„ 
        
- **DevSecOpsμ—μ„μ μ—­ν• **
    
    - IaC μ½”λ“ λ³΄μ• β†’ μ‚¬μ „ μ κ²€
        
    - μ΄μ κ³„μ • λ³΄μ• β†’ μ‚¬ν›„ μ κ²€
        

---

## 2οΈβƒ£ IaC λ³΄μ•μ ν•„μ”μ„±

- **IaC (Infrastructure as Code)**: μΈν”„λΌλ¥Ό μ½”λ“λ΅ μ •μ (Terraform, CloudFormation λ“±)
    
- μ¥μ : μλ™ν™”, μ¬ν„ κ°€λ¥, κ΄€λ¦¬ μ©μ΄
    
- μ„ν—: μλ»λ μ½”λ“ λ°°ν¬ β†’ λ³΄μ• λ¬Έμ  ν™•μ‚°
    
- μ:
    
    - Security Group 0.0.0.0/0 β†’ λ„κµ¬λ‚ μ ‘κ·Ό κ°€λ¥
        
    - RDS μ•”νΈν™” μµμ… λ„λ½ β†’ λ―Όκ° λ°μ΄ν„° λ…Έμ¶
        
    - ν•λ“μ½”λ”©λ λΉ„λ°€λ²νΈ
        

---
<!-- _class: medium -->
## 3οΈβƒ£ CSPM μ£Όμ” μ κ²€ ν•­λ©

1. **λ„¤νΈμ›ν¬ λ³΄μ•**
    
    - Security Group κ³Όλ„ κ°λ°© μ—¬λ¶€
        
    - VPC/Subnet κµ¬μ„± μ¤λ¥
        
2. **λ°μ΄ν„° λ³΄μ•**
    
    - μ•”νΈν™” λ―Έμ μ© (RDS, S3)
        
    - Public Access ν—μ©
        
3. **κ³„μ • λ° κ¶ν•**
    
    - Root κ³„μ • MFA λ―Έμ‚¬μ©
        
    - IAM μ •μ±… κ³Όλ„ κ¶ν•
        
4. **λ΅κΉ… λ° λ¨λ‹ν„°λ§**
    
    - CloudTrail λΉ„ν™μ„±ν™”
        
    - λ΅κ·Έ μ•”νΈν™” λ„λ½
        

---

## 4οΈβƒ£ CSPM λ„κµ¬μ™€ λ°©μ‹

- **Trivy**: `trivy config`, `trivy aws`
    
- **Checkov**: IaC μ½”λ“ μ κ²€ μ „λ¬Έ
    
- **Cloud Custodian**: μ •μ±… κΈ°λ° ν΄λΌμ°λ“ κ΄€λ¦¬
    
- **μƒμ© μ†”λ£¨μ…**: Prisma Cloud, Wiz, Orca Security λ“±
    

---

## 5οΈβƒ£ CSPM μ μ© μ‚¬λ΅€

- **κΈμµκΈ°κ΄€**: Terraform μ½”λ“ μ κ²€μΌλ΅ ISMS-P μΈμ¦ λ€μ‘
    
- **μ¤νƒ€νΈμ—…**: S3 Public Access νƒμ§€ μλ™ν™” β†’ λ°μ΄ν„° μ μ¶ μλ°©
    
- **κ³µκ³µκΈ°κ΄€**: IaC μ½”λ“ + κ³„μ • μ •μ±… μ κ²€ β†’ λ³΄μ• κ°μ‚¬ λ€μ‘
    

---

## 6οΈβƒ£ ν† λ΅  κ³Όμ 

1. IaC λ³΄μ• μ κ²€μ„ ν•μ§€ μ•μΌλ©΄ μ–΄λ–¤ λ¬Έμ κ°€ λ°μƒν• κΉ?
    
2. CSPM μ κ²€ ν•­λ© μ¤‘ μ‹¤μ  μ΄μ ν™κ²½μ—μ„ κ°€μ¥ μ¤‘μ”ν• κ²ƒμ€ λ¬΄μ—‡μΈκ°€?
    
3. CSPMκ³Ό CWPPκ°€ ν†µν•©λ CNAPPμ μ¥μ μ€ λ¬΄μ—‡μΈκ°€?
    

---

## β… μ •λ¦¬

- CSPMμ€ ν΄λΌμ°λ“ μΈν”„λΌ λ° κ³„μ •μ λ³΄μ• κµ¬μ„±μ„ μ κ²€ν•λ” μ²΄κ³„
    
- IaC λ³΄μ• μ κ²€μ€ μλ»λ μ½”λ“ λ°°ν¬λ΅ μΈν• λ³΄μ• μ‚¬κ³ λ¥Ό μλ°©
    
- μ£Όμ” μ κ²€ ν¬μΈνΈ: λ„¤νΈμ›ν¬, λ°μ΄ν„°, κ³„μ •, λ΅κΉ…
    
- CSPM λ„κµ¬μ™€ μƒμ© μ†”λ£¨μ…μ„ ν™μ©ν•΄ μλ™ν™” κ°€λ¥
---
# 4μ£Όμ°¨: CSPM β€“ IaC λ³΄μ• μ κ²€ (μ‹¤μµ, 3μ‹κ°„)

---

## π― ν•™μµ λ©ν‘

- CSPM κ°λ… μ΄ν•΄
    
- Trivyλ΅ Terraform μ½”λ“ λ³΄μ• μ κ²€ μν–‰
    
- IaC λ³΄μ• μ΄μ ν•΄μ„ λ° μ½”λ“ μμ •μΌλ΅ κ°μ„ 
    

---

## 1οΈβƒ£ IaC μ½”λ“ κµ¬μ΅° ν™•μΈ (30λ¶„)

```bash
cd terraform
ls
```

μμƒ κµ¬μ΅°

```
main.tf
variables.tf
outputs.tf
```

- **main.tf**: AWS λ¦¬μ†μ¤ μ •μ (VPC, EC2, SG λ“±)
    
- **variables.tf**: λ³€μ μ •μ
    
- **outputs.tf**: μ¶λ ¥ κ°’
    

---

## 2οΈβƒ£ Trivy IaC λ³΄μ• μ κ²€ (40λ¶„)

```bash
trivy config ./terraform
```

μμƒ μ¶λ ¥

```
aws_security_group.my_sg
  β”” Severity: HIGH
  β”” Security group allows ingress from 0.0.0.0/0 to port 22

aws_db_instance.mydb
  β”” Severity: MEDIUM
  β”” Storage encryption is not enabled
```

JSON μ €μ¥

```bash
trivy config -f json -o reports/terraform.json ./terraform
```

---

## 3οΈβƒ£ μ½”λ“ μμ • & μ¬μ κ²€ (40λ¶„)

### λ³΄μ• κ·Έλ£Ή κ°μ„ 

```hcl
ingress {
  from_port   = 22
  to_port     = 22
  protocol    = "tcp"
  cidr_blocks = ["203.0.113.25/32"] # νΉμ • IPλ§ ν—μ©
}
```

### RDS μ•”νΈν™” μ μ©

```hcl
storage_encrypted = true
```

μμ • ν›„ λ‹¤μ‹ μ‹¤ν–‰

```bash
trivy config ./terraform
```

π‘‰ κ°μ„ λ κ²°κ³Ό λΉ„κµ

---

## 4οΈβƒ£ ν€λ³„ μ‹¤μµ κ³Όμ  (30λ¶„)

1. ν€λ³„λ΅ `trivy config ./terraform` μ‹¤ν–‰ κ²°κ³Ό μΊ΅μ²
    
2. Critical/High μ·¨μ•½μ  2κ° μ΄μƒ κ°μ„  μ½”λ“ μ‘μ„±
    
3. μμ • μ „/ν›„ κ²°κ³Ό λΉ„κµν‘ μ‘μ„±
    
4. ν€ Repoμ— Markdown λ³΄κ³ μ„ μ—…λ΅λ“
    

---

## 5οΈβƒ£ λ°ν‘ & ν† λ΅  (30λ¶„)

- κ° ν€ μ·¨μ•½μ  λ° κ°μ„  λ°©λ²• λ°ν‘ (5λ¶„)
    
- κ³µν†µμ μΌλ΅ λ°κ²¬λ μ·¨μ•½μ  λ…Όμ
    
- ν† λ΅ : β€IaC μ½”λ“μ—μ„ κ°€μ¥ λ¨Όμ € μ κ²€ν•΄μ•Ό ν•  λ³΄μ• ν¬μΈνΈλ” λ¬΄μ—‡μΈκ°€?β€
    

---

## β… μ •λ¦¬

- CSPMμ€ IaC μ½”λ“μ λ³΄μ• μƒνƒλ¥Ό μ κ²€ν•λ” μ²΄κ³„
    
- Trivy `trivy config`λ΅ Terraform μ½”λ“ μ κ²€ κ°€λ¥
    
- SG κ³Όλ‹¤ κ°λ°©, μ•”νΈν™” λ―Έμ μ© λ“± μ£Όμ” μ·¨μ•½μ  μ‹λ³„
    
- μ½”λ“ μμ • ν›„ μ¬μ κ²€μΌλ΅ κ°μ„  ν¨κ³Ό ν™•μΈ
